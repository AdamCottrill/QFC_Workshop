\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[sc]{mathpazo}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{verbose,tmargin=2.5cm,bmargin=2.5cm,lmargin=2.5cm,rmargin=2.5cm}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\usepackage{url}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=2,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\hypersetup{
 pdfstartview={XYZ null null 1}}
\usepackage{breakurl}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}





\title{Von Bertalanfy growth curve for lake whitefish sample from
       southern Lake Huron in 2009}


\author{Bob Sakamano}

\maketitle


\section*{Abstract}
\label{sec:abstract}

A von Bertalanfy growth curve was fit to Lake whitefish (Coregonus
clupeaformis) sampled from southern Lake Huron in 2009.  Lake
whitefish were collected from the commerical fishery as well as the
independent survey conducted by the Ontario Ministry of Natural
resources.  A total of 111 lake whitefish were include in the sample.
The Von Bertalanfy growth parameters estimated using non-linar least
squares where Linf= 600 $\pm$ 20, k = 0.25 $\pm$ 0.10, and t0= 0.1
$\pm$ 0.02.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{wfdata} \hlkwb{<-} \hlkwd{read.csv}\hlstd{(}\hlstr{"whitefish.csv"}\hlstd{,} \hlkwc{header} \hlstd{=} \hlnum{TRUE}\hlstd{)}
\hlstd{ages} \hlkwb{<-} \hlkwd{unique}\hlstd{(wfdata}\hlopt{$}\hlstd{AGE)}
\end{alltt}
\end{kframe}
\end{knitrout}



\section*{Introduction}
\label{sec:introduction}





\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{# fit the model and predicte size at age}
\hlstd{start} \hlkwb{<-} \hlkwd{list}\hlstd{(}\hlkwc{Linf} \hlstd{=} \hlkwd{max}\hlstd{(wfdata}\hlopt{$}\hlstd{FLEN),} \hlkwc{t0} \hlstd{=} \hlnum{0}\hlstd{,} \hlkwc{k} \hlstd{=} \hlnum{0.25}\hlstd{)}
\hlstd{vonB} \hlkwb{<-} \hlkwd{nls}\hlstd{(FLEN} \hlopt{~} \hlstd{Linf} \hlopt{*} \hlstd{(}\hlnum{1} \hlopt{-} \hlkwd{exp}\hlstd{(}\hlopt{-}\hlstd{k} \hlopt{*} \hlstd{(AGE} \hlopt{-} \hlstd{t0))),} \hlkwc{data} \hlstd{= wfdata,} \hlkwc{start} \hlstd{= start)}
\hlkwd{summary}\hlstd{(vonB)}
\end{alltt}
\begin{verbatim}
## 
## Formula: FLEN ~ Linf * (1 - exp(-k * (AGE - t0)))
## 
## Parameters:
##      Estimate Std. Error t value Pr(>|t|)    
## Linf 568.3847    15.3966   36.92   <2e-16 ***
## t0    -0.5190     0.1946   -2.67   0.0088 ** 
## k      0.2325     0.0235    9.90   <2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 34 on 108 degrees of freedom
## 
## Number of iterations to convergence: 6 
## Achieved convergence tolerance: 2.28e-06
\end{verbatim}
\begin{alltt}
\hlstd{predicted} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{AGE} \hlstd{=} \hlkwd{seq}\hlstd{((}\hlkwd{min}\hlstd{(ages)} \hlopt{-} \hlnum{1}\hlstd{),} \hlkwd{max}\hlstd{(ages)} \hlopt{+} \hlnum{1}\hlstd{,} \hlkwc{by} \hlstd{=} \hlnum{0.1}\hlstd{),} \hlkwc{FLEN} \hlstd{=} \hlnum{0}\hlstd{)}
\hlstd{predicted}\hlopt{$}\hlstd{FLEN} \hlkwb{<-} \hlkwd{predict}\hlstd{(vonB,} \hlkwc{newdata} \hlstd{= predicted)}
\end{alltt}
\end{kframe}
\end{knitrout}




\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{# make a plot}
\hlstd{ylim} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlnum{0}\hlstd{,} \hlkwd{max}\hlstd{(wfdata}\hlopt{$}\hlstd{FLEN))}
\hlkwd{plot}\hlstd{(wfdata}\hlopt{$}\hlstd{AGE, wfdata}\hlopt{$}\hlstd{FLEN,} \hlkwc{xlab} \hlstd{=} \hlstr{"Age"}\hlstd{,} \hlkwc{ylab} \hlstd{=} \hlstr{"Fork Length (mm)"}\hlstd{)}
\hlkwd{lines}\hlstd{(predicted}\hlopt{$}\hlstd{AGE, predicted}\hlopt{$}\hlstd{FLEN,} \hlkwc{col} \hlstd{=} \hlstr{"blue"}\hlstd{)}
\end{alltt}
\end{kframe}

{\centering \includegraphics[width=\maxwidth]{figure/minimal-plot_fit} 

}



\end{knitrout}



\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{# calculate mean size at age}
\hlstd{mu} \hlkwb{<-} \hlkwd{dcast}\hlstd{(wfdata, AGE} \hlopt{~} \hlstd{.,} \hlkwc{value} \hlstd{=} \hlstr{"FLEN"}\hlstd{,} \hlkwc{fun} \hlstd{= mean)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Using FLEN as value column: use value.var to override.}}\begin{alltt}
\hlkwd{names}\hlstd{(mu)} \hlkwb{<-} \hlkwd{c}\hlstd{(}\hlstr{"Age"}\hlstd{,} \hlstr{"Observed"}\hlstd{)}
\hlstd{mu}\hlopt{$}\hlstd{Predicted} \hlkwb{<-} \hlkwd{predict}\hlstd{(vonB,} \hlkwc{newdata} \hlstd{=} \hlkwd{data.frame}\hlstd{(}\hlkwc{AGE} \hlstd{= ages))}
\end{alltt}
\end{kframe}
\end{knitrout}



\section*{Materials and Methods}
\label{sec:Materials_and_Methods}



\section*{Results}
\label{sec:results}



\section*{Discussion}
\label{sec:discussion}




\section*{References}
\label{sec:references}





\end{document}
